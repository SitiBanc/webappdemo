<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>電影訊息</title>
		<!--Import Google Icon Font-->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<!--Import materialize.css-->
		<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<style>
			/*Import Noto Sans Font*/
			@import url(http://fonts.googleapis.com/earlyaccess/notosanstc.css); 
			*{font-family: 'Noto Sans TC', sans-serif;}
			
			header, main, footer {
				padding-left: 300px;
			}

			a.page-title {
				font-size: 20px;
			}

			@media only screen and (max-width : 992px) {
				header, main, footer {
					padding-left: 0;
				}
				nav .nav-wrapper a.page-title {
					font-size: 14px;
				}
			}
		</style>
		<script type="text/javascript">

			// 取得網址裡的參數 
			function GetUrlVar(VarName) {
				name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
				var regexS = "[\\?&]" + VarName + "=([^&#]*)";
				var regex = new RegExp(regexS);
				var results = regex.exec(window.location.href);
				if (results == null)
					return "";
				else
					return results[1];
			}
		</script>
	</head>

	<body>
		<!--Import jQuery before materialize.js-->
		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="js/materialize.min.js"></script>
		<header>
			<!-- Navbar -->
			<div class="navbar-fixed">
				<nav class="cyan">
					<a href="#" data-activates="slide-out" class="button-collapse top-nav full hide-on-large-only"><i class="material-icons">menu</i></a>
					<div class="nav-wrapper container">
						<a href="movie_potato.html" class="breadcrumb page-title">電影馬鈴薯</a>
						<a href="sales_rank.html" class="breadcrumb page-title">票房排行榜</a>
						<a class="breadcrumb page-title">電影訊息</a>
				  </div>
				</nav>
			</div>
			<!-- Sidenav panel -->
			<ul id="slide-out" class="side-nav fixed">
				<li>
					<div class="userView">
						<div class="background">
							<img src="images/sky.jpg">
						</div>
						<a><img class="circle" src="images/potato_inside.png"></a>
						<a><span class="white-text name">Movie Potato</span></a>
						<a><span class="white-text email">movie_potato@gmail.com</span></a>
					</div>
				</li>
				<li><a class="waves-effect" href="nearby_theater.html"><i class="material-icons">place</i>附近電影院</a></li>
				<li><a class="waves-effect" href="hot_review.html"><i class="material-icons">grade</i>熱門影評</a></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">credit_card</i>線上訂票</a></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">redeem</i>優惠專區</a></li>
				<li><div class="divider"></div></li>
				<li><a class="waves-effect" href="fav_trailer.html"><i class="material-icons">theaters</i>收藏預告片</a></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">comment</i>評論紀錄</a></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">receipt</i>訂票紀錄</a></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">watch_later</i>想看清單</a></li>
				<li><div class="divider"></div></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">settings</i>設定</a></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">help</i>幫助</a></li>
				<li><a class="waves-effect" href="#!"><i class="material-icons">info</i>關於 電影馬鈴薯</a></li>
			</ul>
		</header>
		
		<main>
			<div class="row">
				<div class="col s6 m4">
					<img style="margin-top: 10px;width: 100%;max-width: 220px; height:350px;" src="" id="poster">
				</div>
				<div class="col s6 m4">
					<a href=""><h5 id="film_title" style="color: black;"><i id="book_btn" class="material-icons" style="color: black;">bookmark</i></h5></a>
					<h6 id="imdbRating">IMDB Rating:</h6>
					<h6 id="metascore">Metascore:</h6>
					<p id="rate">Rated:</p>
					<p id="release">Released:</p>
					<p id="runtime">Runtime:</p>
					<p id="director">Director:</p>
					<p id="actors">Cast:</p>
				</div>
			</div>
			<div>
				<ul class="collapsible" data-collapsible="accordion">
					<li>
					  <div class="collapsible-header cyan lighten-5 active">劇情簡介</div>
					  <div class="collapsible-body"><p id="plot"></p></div>
					</li>
					<li>
					  <div class="collapsible-header cyan lighten-5">劇照</div>
					  <div class="collapsible-body"><p>Lorem ipsum dolor sit amet.</p></div>
					</li>
					<li>
					  <div class="collapsible-header cyan lighten-5">網友短評</div>
					  <div class="collapsible-body"><p>Lorem ipsum dolor sit amet.</p></div>
					</li>
				</ul>
			</div>
			<div class="fixed-action-btn horizontal click-to-toggle">
				<a class="btn-floating btn-large amber">
				  <i class="material-icons">menu</i>
				</a>
				<ul>
				  <li><a class="btn-floating teal"><i class="material-icons">credit_card</i></a></li>
				  <li><a class="btn-floating green"><i class="material-icons">thumb_up</i></a></li>
				  <li><a class="btn-floating green"><i class="material-icons">thumb_down</i></a></li>
				  <li><a class="btn-floating blue"><i class="material-icons">comment</i></a></li>
				</ul>
			</div>
		</main>
		<script>
			//XmlHttpRequest
			var xmlhttp = new XMLHttpRequest();
			var url = "https://www.omdbapi.com/?i=" + GetUrlVar("imdbID");

			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var jsonData = JSON.parse(this.responseText);
					display(jsonData);
				}
			};
			xmlhttp.open("GET", url, true);
			xmlhttp.send();
			
			function display(jsonData){
				document.getElementById("poster").src = jsonData.Poster;
				document.getElementById("film_title").innerHTML += jsonData.Title + "(" + jsonData.Year +")";
				document.getElementById("imdbRating").innerHTML += jsonData.imdbRating;
				document.getElementById("metascore").innerHTML += jsonData.Metascore;
				document.getElementById("rate").innerHTML += jsonData.Rated;
				document.getElementById("release").innerHTML += jsonData.Released;
				document.getElementById("runtime").innerHTML += jsonData.Runtime;
				document.getElementById("director").innerHTML += jsonData.Director;
				document.getElementById("actors").innerHTML += jsonData.Actors;
				document.getElementById("plot").innerHTML += jsonData.Plot;
			}
			// Initialize collapse button
			$(".button-collapse").sideNav();
			jQuery.fn.clickToggle = function(a,b) {
				function cb(){ [b,a][this._tog^=1].call(this); }
				return this.on("click", cb);
			};
		</script>
	</body>
</html>